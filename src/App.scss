@import url('https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap&subset=cyrillic');
$base-font-family: 'Roboto', sans-serif;

$primary-color: #AA1E46;
$secondary-color: lighten($primary-color, 47.5%);

$size-lg: 1080px;
$size-xl: 1520px;

// Variables and mixins
@import "~spectre.css/src/variables";
@import "~spectre.css/src/mixins";

// Reset and dependencies
@import "~spectre.css/src/normalize";
@import "~spectre.css/src/base";

// Elements
@import "~spectre.css/src/typography";
@import "~spectre.css/src/tables";
@import "~spectre.css/src/buttons";
@import "~spectre.css/src/forms";
@import "~spectre.css/src/accordions";

// Layout
@import "~spectre.css/src/layout";

// Components
@import "~spectre.css/src/toasts";
@import "~spectre.css/src/tooltips";

// Utility classes
@import "~spectre.css/src/utilities";

// Icons
@import "~spectre.css/src/icons/icons-core";
@import "~spectre.css/src/icons/icons-navigation";
@import "~spectre.css/src/icons/icons-action";

// -----------------------------------------------

.text-nowrap { white-space: nowrap; }
.d-flex { align-items: center; }

#table th, #table td {
  &:not(:nth-child(1)):not(:nth-child(2)) {
    text-align: right;
  }
}

#table tfoot td {
  border: none;
}

#stats td {
  &:nth-child(2) {
    text-align: right;
  }
}

#mobile {
  // see .btn-lg definition
  padding-bottom: $control-size-lg;

  #navigation {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    margin: 0;
    background: white;
    
    .btn {
      text-transform: uppercase;
      border-radius: 0;
      &:focus { box-shadow: none; }
      &:first-child { border-left: none; }
      &:last-child { border-right: none; }
    }
  }

  #form {
    padding: $unit-4 $unit-4;

    .accordion input:checked ~ .accordion-body, .accordion[open] .accordion-body {
      max-height: 1000rem;
    }

    .payment {
      margin-bottom: $unit-6;
    }
    .payment-header {
      justify-content: space-between;
    }
  }

  #calculation {
    padding: $unit-2 $unit-2;
  }

  #table {
    font-size: 0.7rem;

    tfoot,
    th:nth-child(3), th:nth-child(4),
    td:nth-child(3), td:nth-child(4) {
      display: none;
    }

    td:nth-child(5) {
      user-select: none;
    }
  }
}

#desktop {
  padding: 1rem;
  max-width: 1920px;
  margin: 0 auto;

  #form {
    @include shadow-variant(.05rem);
    padding: 0 $unit-4 $unit-2 $unit-4;

    .form-horizontal { padding: 0; }
    .tooltip::after { white-space: pre-line; width: 440px; }

    .payment {
      align-items: flex-start;
      margin-bottom: $unit-3;
      &:last-child button {
        margin-left: 1rem + $unit-2;
      }
    }
    .payment-id {
      flex: 0 0 1rem;
      text-align: right;
      position: relative;
      top: .5em;
    }
    .payment-fields {
      flex: 1;
      margin: 0 (-$unit-1);
      .column {
        margin-bottom: $unit-2;
        padding: 0 $unit-1;
      }
    }

    input[type="date"]::-webkit-clear-button { display: none; }
    input[type="date"]::-webkit-inner-spin-button { display: none; }
  }

  #calculation {
    @include shadow-variant(.05rem);
    padding: $unit-2 $unit-4;

    #stats {
      display: none;
    }

    #table {
      width: 100%;
      th, td { padding: $unit-1 $unit-2; }
    }
  }

  #error {
    @include shadow-variant(.05rem);
  }
}

@media (min-width: $size-xl) {
  #desktop {
    #form, #calculation {
      height: calc(100vh - 2rem);
      overflow-y: scroll;
    }
    #form .form-horizontal:last-child, #calculation #table {
      // TODO: wtf is this affecting #calculation table
      margin-bottom: $unit-2;
    }
  }
}

@media (max-width: $size-xl) {
  #desktop {
    #calculation {
      margin-top: $unit-4;
    }

    #form > div:first-child {
      & > div:first-child {
        padding-right: $unit-4;
        border-right: 1px solid $border-color-light;
      }
      & > div:nth-child(2) {
        padding-left: $unit-4;
      }
    }

    #error {
      margin-top: $unit-4;
    }
  }
}

@media (max-width: $size-lg) {
  #desktop {
    #form > div:first-child {
      & > div:first-child {
        padding-right: $unit-2;
        border-right: none;
      }
      & > div:nth-child(2) {
        padding-left: $unit-2;
      }
    }
  }
}

@media (max-width: $size-md) {
  #desktop #calculation #table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
  }
}